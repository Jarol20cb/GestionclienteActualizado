<div class="form-container">
  <form [formGroup]="form" (ngSubmit)="onNext()">
    <h2>Datos personales</h2>
    <div class="form-grid">
      <div class="form-field full-width">
        <label for="username">Correo Electrónico</label>
        <input type="text" id="username" name="username" formControlName="username" placeholder="Ingresa tu correo" />
        <div *ngIf="form.get('username')?.invalid && (form.get('username')?.dirty || form.get('username')?.touched)" class="error-message">
          <div *ngIf="form.get('username')?.hasError('required')">El correo electrónico es obligatorio.</div>
          <div *ngIf="form.get('username')?.hasError('email')">Por favor, introduce un correo electrónico válido.</div>
        </div>
      </div>

      <div class="form-field half-width">
        <label for="name">Nombre</label>
        <input type="text" id="name" name="name" formControlName="name" placeholder="Ingresa tu nombre" />
        <div *ngIf="form.get('name')?.invalid && (form.get('name')?.dirty || form.get('name')?.touched)" class="error-message">
          <div *ngIf="form.get('name')?.hasError('required')">El nombre es obligatorio.</div>
          <div *ngIf="form.get('name')?.hasError('minlength')">El nombre es muy corto.</div>
        </div>
      </div>

      <div class="form-field half-width">
        <label for="companyName">Nombre de la empresa</label>
        <input type="text" id="companyName" name="companyName" formControlName="companyName" placeholder="Ingresa el nombre de la empresa" />
        <div *ngIf="form.get('companyName')?.invalid && (form.get('companyName')?.dirty || form.get('companyName')?.touched)" class="error-message">
          <div *ngIf="form.get('companyName')?.hasError('required')">El nombre de la empresa es obligatorio.</div>
        </div>
      </div>

      <div class="form-field half-width">
        <label for="password">Contraseña</label>
        <input [type]="passwordVisible ? 'text' : 'password'" id="password" name="password" formControlName="password" class="password-input" placeholder="Ingresa tu contraseña" />
        <div *ngIf="form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)" class="error-message">
          <div *ngIf="form.get('password')?.hasError('required')">La contraseña es obligatoria.</div>
          <div *ngIf="form.get('password')?.hasError('minlength')">La contraseña es muy corta. Debe tener al menos 5 caracteres.</div>
        </div>
      </div>

      <div class="form-field half-width">
        <label for="confirmPassword">Confirmar Contraseña</label>
        <input [type]="passwordVisible ? 'text' : 'password'" id="confirmPassword" name="confirmPassword" formControlName="confirmPassword" (input)="validatePasswordConfirmation()" class="password-input" placeholder="Confirma tu contraseña" />
        <button class="toggle-password-button" (click)="togglePasswordVisibility($event)">Mostrar</button>
        <div *ngIf="form.get('confirmPassword')?.invalid && (form.get('confirmPassword')?.dirty || form.get('confirmPassword')?.touched)" class="error-message">
          <div *ngIf="form.get('confirmPassword')?.hasError('required')">Confirmar contraseña es obligatorio.</div>
          <div *ngIf="form.get('confirmPassword')?.hasError('passwordMismatch')">Las contraseñas no coinciden.</div>
        </div>
      </div>
    </div>
    <div class="button-group">
      <button type="submit" class="custom-button" [disabled]="!form.valid">Siguiente</button>
    </div>
  </form>
</div>
