<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro</title>
</head>
<body>
  <div class="container">
    <div class="form-container">
      <form [formGroup]="form" (ngSubmit)="registrar()" class="custom-form">
        <h2>Registro</h2>
        <div class="form-grid">
          <div class="form-field full-width">
            <label for="username">Correo Electrónico</label>
            <input type="text" id="username" name="username" formControlName="username" placeholder="Ingresa tu correo" />
            <div *ngIf="form.get('username')?.invalid && (form.get('username')?.dirty || form.get('username')?.touched)" class="error-message">
              <div *ngIf="form.get('username')?.hasError('email')">
                Por favor, introduce un correo electrónico válido.
              </div>
              <div *ngIf="form.get('username')?.hasError('required')">
                El correo electrónico es obligatorio.
              </div>
            </div>
          </div>
          <div class="form-field half-width">
            <label for="name">Nombre</label>
            <input type="text" id="name" name="name" formControlName="name" placeholder="Ingresa tu nombre" />
          </div>
          <div class="form-field half-width">
            <label for="companyName">Nombre de la empresa</label>
            <input type="text" id="companyName" name="companyName" formControlName="companyName" placeholder="Ingresa el nombre de la empresa" />
          </div>
          <div class="form-field half-width">
            <label for="password">Contraseña</label>
            <input [type]="passwordVisible ? 'text' : 'password'" id="password" name="password" formControlName="password" class="password-input" placeholder="Ingresa tu contraseña" />
            <div *ngIf="form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)" class="error-message">
              <div *ngIf="form.get('password')?.hasError('minlength')">
                La contraseña es muy corta. Debe tener al menos 5 caracteres.
              </div>
            </div>
          </div>
          <div class="form-field half-width">
            <label for="confirmPassword">Confirmar Contraseña</label>
            <input [type]="passwordVisible ? 'text' : 'password'" id="confirmPassword" name="confirmPassword" formControlName="confirmPassword" (input)="validatePasswordConfirmation()" class="password-input" placeholder="Confirma tu contraseña" />
            <button class="toggle-password-button" (click)="togglePasswordVisibility($event)">Mostrar</button>
            <div *ngIf="form.get('confirmPassword')?.invalid && (form.get('confirmPassword')?.dirty || form.get('confirmPassword')?.touched)" class="error-message">
              <div *ngIf="form.get('confirmPassword')?.hasError('passwordMismatch')">
                Las contraseñas no coinciden.
              </div>
            </div>
          </div>
          <div class="form-field full-width">
            <label for="roles">¿Quiero registrarme como?</label>
            <div class="radio-group">
              <label><input type="radio" formControlName="roles" value="ADMIN"> Administrador</label>
              <label><input type="radio" formControlName="roles" value="USER"> Usuario</label>
            </div>
          </div>
        </div>
        <div class="button-group">
          <button type="submit" class="custom-button" [disabled]="!form.valid">Aceptar</button>
          <button type="button" class="custom-button secondary" routerLink="/login">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
